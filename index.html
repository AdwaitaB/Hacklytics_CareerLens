<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CareerLens AI — Workforce Intelligence</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&family=Instrument+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #080b12; --bg2: #0d1220; --bg3: #111827;
  --border: rgba(255,255,255,0.07);
  --blue: #3b82f6; --teal: #14b8a6; --violet: #8b5cf6;
  --crimson: #ef4444; --amber: #f59e0b;
  --text: #e2e8f0; --muted: #64748b; --card: rgba(255,255,255,0.03);
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Instrument Sans',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }
body::before {
  content:''; position:fixed; inset:0;
  background: radial-gradient(ellipse 80% 50% at 20% 10%, rgba(59,130,246,0.06) 0%, transparent 60%),
              radial-gradient(ellipse 60% 40% at 80% 80%, rgba(139,92,246,0.05) 0%, transparent 60%);
  pointer-events:none; z-index:0;
}
nav {
  position:fixed; top:0; left:0; right:0; z-index:100;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 2rem; height:60px;
  background:rgba(8,11,18,0.85); backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
}
.logo { font-family:'Syne',sans-serif; font-size:1.1rem; font-weight:800; letter-spacing:-0.02em; display:flex; align-items:center; gap:0.5rem; }
.logo-dot { width:8px; height:8px; border-radius:50%; background:var(--blue); box-shadow:0 0 12px var(--blue); animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
.nav-badge { font-family:'DM Mono',monospace; font-size:0.65rem; padding:0.2rem 0.6rem; border-radius:20px; background:rgba(20,184,166,0.1); border:1px solid rgba(20,184,166,0.3); color:var(--teal); }
.main { padding-top:60px; position:relative; z-index:1; }

/* HERO */
.hero { padding:4rem 2rem 2rem; text-align:center; max-width:800px; margin:0 auto; }
.hero-eyebrow { font-family:'DM Mono',monospace; font-size:0.7rem; letter-spacing:0.2em; color:var(--teal); text-transform:uppercase; margin-bottom:1.2rem; opacity:0; animation:fadeUp 0.8s 0.2s ease forwards; }
.hero h1 { font-family:'Syne',sans-serif; font-size:clamp(2rem,5vw,3.5rem); font-weight:800; line-height:1.1; letter-spacing:-0.03em; margin-bottom:1rem; opacity:0; animation:fadeUp 0.8s 0.4s ease forwards; }
.hero h1 span { background:linear-gradient(135deg,var(--blue),var(--violet)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.hero-sub { font-size:1rem; color:var(--muted); max-width:520px; margin:0 auto 2rem; line-height:1.6; opacity:0; animation:fadeUp 0.8s 0.6s ease forwards; }
@keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }

/* CONTROLS */
.controls-bar {
  display:flex; align-items:center; justify-content:center; gap:1rem; flex-wrap:wrap;
  padding:1.25rem 2rem; background:var(--bg2);
  border-top:1px solid var(--border); border-bottom:1px solid var(--border);
  opacity:0; animation:fadeUp 0.8s 0.8s ease forwards;
}
.ctrl-group { display:flex; flex-direction:column; gap:0.3rem; }
.ctrl-label { font-family:'DM Mono',monospace; font-size:0.6rem; color:var(--muted); text-transform:uppercase; letter-spacing:0.1em; }
select {
  background:var(--bg3); border:1px solid var(--border); color:var(--text);
  padding:0.5rem 0.75rem; border-radius:8px;
  font-family:'Instrument Sans',sans-serif; font-size:0.85rem;
  cursor:pointer; transition:border-color 0.2s; min-width:220px;
}
select:hover,select:focus { border-color:var(--blue); outline:none; }
.btn {
  padding:0.55rem 1.25rem; border-radius:8px;
  font-family:'Instrument Sans',sans-serif; font-size:0.85rem; font-weight:600;
  cursor:pointer; transition:all 0.2s; border:none;
}
.btn-primary { background:linear-gradient(135deg,var(--blue),var(--violet)); color:white; }
.btn-primary:hover { transform:translateY(-1px); box-shadow:0 8px 25px rgba(59,130,246,0.35); }
.btn-primary:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
.btn-secondary { background:var(--card); border:1px solid var(--border); color:var(--text); }
.btn-secondary:hover { border-color:var(--teal); color:var(--teal); }

/* STAT CARDS */
.stats-strip { display:grid; grid-template-columns:repeat(4,1fr); gap:0; background:var(--border); border-bottom:1px solid var(--border); }
.stat-card { background:var(--bg2); padding:1.25rem 1.5rem; }
.stat-label { font-family:'DM Mono',monospace; font-size:0.6rem; text-transform:uppercase; letter-spacing:0.1em; color:var(--muted); margin-bottom:0.4rem; }
.stat-value { font-family:'Syne',sans-serif; font-size:1.5rem; font-weight:800; }
.stat-sub { font-size:0.72rem; margin-top:0.2rem; color:var(--muted); }
.delta-up { color:var(--teal); }
.delta-down { color:var(--crimson); }

/* PANELS */
.dashboard { display:grid; grid-template-columns:1fr 1fr; gap:1px; background:var(--border); }
.panel { background:var(--bg); padding:1.75rem; position:relative; overflow:hidden; }
.panel-full { grid-column:1/-1; }
.panel-header { display:flex; align-items:flex-start; justify-content:space-between; margin-bottom:1.25rem; }
.panel-title { font-family:'Syne',sans-serif; font-size:0.95rem; font-weight:700; letter-spacing:-0.01em; }
.panel-subtitle { font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--muted); margin-top:0.2rem; text-transform:uppercase; letter-spacing:0.08em; }
.panel-badge { font-family:'DM Mono',monospace; font-size:0.6rem; padding:0.2rem 0.5rem; border-radius:4px; white-space:nowrap; }
.badge-gemini { background:rgba(139,92,246,0.15); border:1px solid rgba(139,92,246,0.3); color:var(--violet); }
.badge-actian { background:rgba(20,184,166,0.15); border:1px solid rgba(20,184,166,0.3); color:var(--teal); }
.badge-bls { background:rgba(59,130,246,0.15); border:1px solid rgba(59,130,246,0.3); color:var(--blue); }
.badge-live { background:rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.3); color:var(--crimson); animation:pulse 2s infinite; }

/* VECTOR CARDS */
.vector-results { display:flex; flex-direction:column; gap:0.6rem; }
.vector-card { background:var(--bg2); border:1px solid var(--border); border-radius:10px; padding:0.85rem 1rem; display:flex; align-items:center; gap:1rem; transition:all 0.2s; }
.vector-card:hover { border-color:var(--teal); transform:translateX(4px); }
.vc-rank { font-family:'DM Mono',monospace; font-size:0.75rem; color:var(--muted); min-width:24px; }
.vc-info { flex:1; }
.vc-name { font-weight:600; font-size:0.85rem; }
.vc-meta { font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--muted); margin-top:0.15rem; }
.vc-score { font-family:'DM Mono',monospace; font-size:0.9rem; font-weight:500; }
.vc-bar { width:60px; height:4px; background:var(--bg3); border-radius:2px; margin-top:0.3rem; overflow:hidden; }
.vc-fill { height:100%; border-radius:2px; background:linear-gradient(90deg,var(--teal),var(--blue)); }

/* GEMINI */
.gemini-panel { background:var(--bg2); border:1px solid rgba(139,92,246,0.2); border-radius:12px; padding:1.25rem; margin-top:1rem; }
.gemini-prompt { display:flex; gap:0.75rem; margin-bottom:1rem; }
.gemini-input { flex:1; background:var(--bg3); border:1px solid var(--border); border-radius:8px; padding:0.6rem 0.9rem; color:var(--text); font-family:'Instrument Sans',sans-serif; font-size:0.85rem; transition:border-color 0.2s; }
.gemini-input:focus { outline:none; border-color:var(--violet); }
.gemini-response { font-size:0.85rem; line-height:1.7; color:var(--text); border-left:2px solid var(--violet); padding-left:1rem; min-height:60px; }
.gemini-cursor { display:inline-block; width:2px; height:14px; background:var(--violet); margin-left:2px; animation:blink 1s infinite; vertical-align:middle; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
.typing-indicator { display:flex; gap:4px; align-items:center; padding:0.5rem 0; }
.typing-dot { width:6px; height:6px; border-radius:50%; background:var(--violet); animation:typingBounce 1.2s infinite; }
.typing-dot:nth-child(2){animation-delay:0.2s} .typing-dot:nth-child(3){animation-delay:0.4s}
@keyframes typingBounce { 0%,100%{transform:translateY(0);opacity:0.4} 50%{transform:translateY(-6px);opacity:1} }

/* QUICK PROMPTS */
.quick-prompts-row { display:flex; flex-wrap:wrap; gap:0.5rem; margin-bottom:0.75rem; }
.quick-btn { padding:0.3rem 0.8rem; border-radius:6px; font-size:0.75rem; font-weight:500; cursor:pointer; border:1px solid var(--border); background:none; color:var(--muted); font-family:'Instrument Sans',sans-serif; transition:all 0.2s; }
.quick-btn:hover { color:var(--text); border-color:var(--violet); }

/* HEATMAP */
.hm-grid { display:grid; gap:3px; }
.hm-cell { border-radius:3px; height:28px; cursor:pointer; transition:transform 0.15s,outline 0.15s; position:relative; display:flex; align-items:center; justify-content:center; font-family:'DM Mono',monospace; font-size:0.6rem; color:rgba(255,255,255,0.5); }
.hm-cell:hover { transform:scale(1.1); outline:2px solid white; z-index:5; }
.hm-row { display:flex; gap:3px; align-items:center; margin-bottom:3px; }
.hm-row-label { font-family:'DM Mono',monospace; font-size:0.62rem; color:var(--muted); width:56px; flex-shrink:0; text-align:right; padding-right:8px; }
.hm-col-headers { display:flex; gap:3px; padding-left:64px; margin-bottom:4px; }
.hm-col-head { font-family:'DM Mono',monospace; font-size:0.55rem; color:var(--muted); text-align:center; }
.hm-tooltip { position:fixed; background:rgba(13,18,32,0.97); border:1px solid var(--border); border-radius:8px; padding:0.5rem 0.75rem; font-size:0.78rem; pointer-events:none; display:none; z-index:1000; backdrop-filter:blur(10px); min-width:180px; }

/* CONCLUSION */
#conclusion-section { display:none; background:var(--bg2); border-top:1px solid var(--border); padding:2rem 1.75rem; }
.conclusion-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:1px; background:var(--border); border-radius:12px; overflow:hidden; margin-bottom:1.5rem; }
.conclusion-card { background:var(--bg); padding:1.25rem; }
.c-label { font-family:'DM Mono',monospace; font-size:0.6rem; text-transform:uppercase; letter-spacing:0.12em; color:var(--muted); margin-bottom:0.5rem; }
.c-value { font-family:'Syne',sans-serif; font-size:1.3rem; font-weight:800; margin-bottom:0.3rem; }
.c-sub { font-size:0.78rem; color:var(--muted); line-height:1.5; }
.conclusion-block { background:var(--bg); border:1px solid var(--border); border-radius:10px; padding:1.25rem; margin-bottom:1rem; }
.conclusion-block-label { font-family:'DM Mono',monospace; font-size:0.6rem; text-transform:uppercase; letter-spacing:0.1em; margin-bottom:0.6rem; }
.conclusion-block-text { font-size:0.83rem; line-height:1.75; color:var(--text); }
.score-row { display:flex; gap:0.6rem; flex-wrap:wrap; margin-top:1.25rem; }
.score-item { background:var(--bg); border:1px solid var(--border); border-radius:10px; padding:0.7rem 1rem; flex:1; min-width:120px; }
.score-item-label { font-family:'DM Mono',monospace; font-size:0.58rem; text-transform:uppercase; letter-spacing:0.1em; color:var(--muted); margin-bottom:0.4rem; }
.score-bar-wrap { display:flex; align-items:center; gap:0.5rem; }
.score-bar-track { flex:1; height:5px; background:var(--bg3); border-radius:2px; overflow:hidden; }
.score-bar-fill { height:100%; border-radius:2px; transition:width 0.8s ease; }
.score-num { font-family:'DM Mono',monospace; font-size:0.75rem; font-weight:600; min-width:24px; }

/* LOADING */
.loading-overlay { position:absolute; inset:0; background:rgba(8,11,18,0.7); display:flex; align-items:center; justify-content:center; border-radius:8px; backdrop-filter:blur(4px); z-index:10; opacity:0; pointer-events:none; transition:opacity 0.3s; }
.loading-overlay.show { opacity:1; pointer-events:all; }
.spinner { width:28px; height:28px; border:2px solid var(--border); border-top-color:var(--blue); border-radius:50%; animation:spin 0.8s linear infinite; }
@keyframes spin { to{transform:rotate(360deg)} }

/* TRACKS BAR */
.tracks-bar { display:flex; gap:1.5rem; align-items:center; justify-content:center; padding:1rem 2rem; background:var(--bg2); border-top:1px solid var(--border); flex-wrap:wrap; }
.track-item { display:flex; align-items:center; gap:0.5rem; font-size:0.75rem; }
.track-dot { width:6px; height:6px; border-radius:50%; }

/* SCROLLBAR */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.1); border-radius:3px; }

/* PLACEHOLDER STATE */
.placeholder-state { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:3rem 2rem; color:var(--muted); text-align:center; gap:0.75rem; }
.placeholder-state svg { opacity:0.2; }
.placeholder-state p { font-size:0.82rem; font-family:'DM Mono',monospace; }

@media(max-width:768px) { .dashboard{grid-template-columns:1fr} .stats-strip{grid-template-columns:repeat(2,1fr)} .conclusion-grid{grid-template-columns:1fr} }
</style>
</head>
<body>

<nav>
  <div class="logo"><div class="logo-dot"></div>CareerLens<span style="color:var(--blue)"> AI</span></div>
  <div class="nav-badge">embedded_jobs.json · 62 jobs · Gemini + Actian VectorAI</div>
</nav>

<div class="main">

  <!-- HERO -->
  <div class="hero">
    <div class="hero-eyebrow">62 BLS occupations · Actian VectorAI · Gemini API</div>
    <h1>Pick a job. <span>See what's real.</span></h1>
    <p class="hero-sub">Select any occupation from your dataset. Vector search finds similar jobs. Gemini tells you what the numbers mean.</p>
  </div>

  <!-- CONTROLS -->
  <div class="controls-bar">
    <div class="ctrl-group">
      <div class="ctrl-label">Occupation</div>
      <select id="job-select">
        <option value="">— Select an occupation —</option>
      </select>
    </div>
    <button class="btn btn-primary" id="analyze-btn" onclick="runAnalysis()" disabled>⚡ Analyze</button>
  </div>

  <!-- STAT CARDS (hidden until job selected) -->
  <div class="stats-strip" id="stats-strip" style="display:none">
    <div class="stat-card">
      <div class="stat-label">Median Salary</div>
      <div class="stat-value" id="stat-salary" style="color:var(--blue)">—</div>
      <div class="stat-sub delta-up" id="stat-salary-sub">national median · 2024</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">10-Year Demand</div>
      <div class="stat-value" id="stat-demand" style="color:var(--teal)">—</div>
      <div class="stat-sub" id="stat-demand-sub">job growth projection</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Work Stress Index</div>
      <div class="stat-value" id="stat-stress" style="color:var(--amber)">—</div>
      <div class="stat-sub" id="stat-stress-sub">out of 100</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Automation Risk</div>
      <div class="stat-value" id="stat-auto" style="color:var(--crimson)">—</div>
      <div class="stat-sub" id="stat-auto-sub">displacement probability</div>
    </div>
  </div>

  <!-- DASHBOARD (hidden until job selected) -->
  <div class="dashboard" id="dashboard" style="display:none">

    <!-- VECTOR SEARCH -->
    <div class="panel">
      <div class="panel-header">
        <div>
          <div class="panel-title">Similar Jobs — Vector Search</div>
          <div class="panel-subtitle">Actian VectorAI · cosine similarity on 3072-dim Gemini embeddings</div>
        </div>
        <span class="panel-badge badge-actian">Actian VectorAI</span>
      </div>
      <div class="vector-results" id="vector-results">
        <div class="placeholder-state">
          <p>Run analysis to search the vector database</p>
        </div>
      </div>
      <div id="vector-insight" style="margin-top:1rem;padding:0.75rem 1rem;background:rgba(20,184,166,0.05);border:1px solid rgba(20,184,166,0.15);border-radius:8px;font-size:0.8rem;color:var(--muted);display:none;line-height:1.6"></div>
    </div>

    <!-- HEATMAP — salary trend 2005–2024 from Gemini -->
    <div class="panel">
      <div class="panel-header">
        <div>
          <div class="panel-title">Salary Heatmap — 2005 to 2024</div>
          <div class="panel-subtitle">Gemini-estimated trend · BLS OES historical data</div>
        </div>
        <span class="panel-badge badge-gemini">Gemini</span>
      </div>
      <div id="heatmap-container">
        <div class="placeholder-state"><p>Run analysis to generate heatmap</p></div>
      </div>
      <div id="hm-tooltip" class="hm-tooltip"></div>
    </div>

    <!-- SALARY OVER YEARS CHART -->
    <div class="panel panel-full">
      <div class="panel-header">
        <div>
          <div class="panel-title">Salary Over the Years — 2005 to 2030</div>
          <div class="panel-subtitle">Historical BLS data (2005–2024) + Gemini forecast (2025–2030)</div>
        </div>
        <div style="display:flex;gap:0.5rem">
          <span class="panel-badge badge-bls">BLS Historical</span>
          <span class="panel-badge badge-gemini">Gemini Forecast</span>
        </div>
      </div>
      <div style="position:relative;height:280px">
        <canvas id="salary-chart"></canvas>
      </div>
      <div id="chart-placeholder" class="placeholder-state"><p>Run analysis to generate salary chart</p></div>
    </div>

    <!-- ASK AI -->
    <div class="panel panel-full">
      <div class="panel-header">
        <div>
          <div class="panel-title">Ask About This Job</div>
          <div class="panel-subtitle">Powered by Gemini API · hacklytics-careerlens.onrender.com/ask</div>
        </div>
        <span class="panel-badge badge-live">● LIVE</span>
      </div>
      <div class="gemini-panel">
        <div class="quick-prompts-row" id="quick-prompts-row"></div>
        <div class="gemini-prompt">
          <input class="gemini-input" id="gemini-input" placeholder="Ask about salary, demand, workload, automation risk..." onkeydown="if(event.key==='Enter')askGemini()" />
          <button class="btn btn-primary" onclick="askGemini()">Ask Gemini</button>
        </div>
        <div class="gemini-response" id="gemini-response">
          <span style="color:var(--muted);font-size:0.8rem">Select a job and run analysis first.</span>
        </div>
      </div>
    </div>

  </div><!-- end dashboard -->

  <!-- CONCLUSION (hidden until analysis runs) -->
  <div id="conclusion-section">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem">
      <div>
        <div style="font-family:'Syne',sans-serif;font-size:1.05rem;font-weight:700;margin-bottom:0.25rem">Analysis — <span id="conclusion-job-name" style="color:var(--blue)"></span></div>
        <div style="font-family:'DM Mono',monospace;font-size:0.62rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em">Gemini API · bls.gov/oes · embedded_jobs.json</div>
      </div>
    </div>

    <div class="conclusion-grid">
      <div class="conclusion-card">
        <div class="c-label">Overall verdict</div>
        <div class="c-value" id="c-verdict">—</div>
        <div class="c-sub" id="c-verdict-sub">—</div>
      </div>
      <div class="conclusion-card">
        <div class="c-label">Best state to work in</div>
        <div class="c-value" id="c-state" style="color:var(--teal)">—</div>
        <div class="c-sub" id="c-state-sub">—</div>
      </div>
      <div class="conclusion-card">
        <div class="c-label">Biggest risk</div>
        <div class="c-value" id="c-risk" style="color:var(--crimson)">—</div>
        <div class="c-sub" id="c-risk-sub">—</div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem">
      <div class="conclusion-block">
        <div class="conclusion-block-label" style="color:var(--blue)">Where it stands today</div>
        <div class="conclusion-block-text" id="c-today">—</div>
      </div>
      <div class="conclusion-block">
        <div class="conclusion-block-label" style="color:var(--violet)">Where it's heading (2025–2030)</div>
        <div class="conclusion-block-text" id="c-future">—</div>
      </div>
    </div>

    <div class="conclusion-block">
      <div class="conclusion-block-label" style="color:var(--amber)">Should you pursue this?</div>
      <div class="conclusion-block-text" id="c-advice">—</div>
    </div>

    <div class="score-row" id="score-row"></div>

  </div><!-- end conclusion -->

  <div class="tracks-bar">
    <div class="track-item"><div class="track-dot" style="background:var(--violet)"></div><span style="color:var(--muted)">Gemini API</span><span style="color:var(--violet);font-family:'DM Mono',monospace;font-size:0.65rem">Trend Analysis + Insights</span></div>
    <div style="color:var(--border)">|</div>
    <div class="track-item"><div class="track-dot" style="background:var(--teal)"></div><span style="color:var(--muted)">Actian VectorAI</span><span style="color:var(--teal);font-family:'DM Mono',monospace;font-size:0.65rem">Similarity Search</span></div>
    <div style="color:var(--border)">|</div>
    <div class="track-item"><div class="track-dot" style="background:var(--blue)"></div><span style="color:var(--muted)">Data source</span><span style="color:var(--blue);font-family:'DM Mono',monospace;font-size:0.65rem">embedded_jobs.json · 62 BLS occupations</span></div>
  </div>

</div><!-- end main -->

<script>
// ═══════════════════════════════════════════════
// DATA — straight from embedded_jobs.json
// Only job_title + embedding (50-dim slice for client-side cosine sim)
// Full 3072-dim search happens via Actian backend
// ═══════════════════════════════════════════════
const JOBS = [{"t":"Computer Software Engineers, Applications","e":[-0.013515323,-0.00030953,0.025325302,-0.038161453,-0.033979632,0.03341157,0.0071768435,0.024888035,0.021922812,0.012833141,-0.017413063,-0.006057611,-0.013532546,-0.008168769,0.0987679,0.0022009725,0.0014606212,-0.015192018,0.016179213,-0.006533099,0.0017258056,0.0014359121,0.0071779364,-0.01827346,-0.007435939,-0.0072648316,0.01920869,0.012620886,0.028126394,-0.025914853,-0.006071097,-5.94868e-05,-0.019116009,-0.0025754138,0.015399172,-0.009621926,0.03654185,-0.00799525,0.02223336,0.01658651,-0.01860235,0.009399862,-0.003451122,-0.009536858,-0.020867093,0.009833083,-0.0001111889,-0.0018327187,-0.013466908,0.023247326]},{"t":"Computer Software Engineers, Systems Software","e":[-0.010081756,-0.0050482526,0.019071387,-0.037882153,-0.028528586,0.03587693,-0.0013284105,0.0053626383,0.021339238,0.0055646477,-0.0069272,-0.021036876,-0.008850584,-0.014816657,0.10712078,-0.0031435904,-0.006014571,-0.010494979,-0.001702782,-0.015429619,-0.006532309,-0.01191079,-0.0020699874,-0.02901642,-0.0006023551,-0.016073562,0.02573848,0.0024159735,0.028672855,-0.033069193,0.0028169104,0.009216418,-0.0034062737,0.034028787,0.019099394,-0.017726144,0.02933742,-0.0077260304,0.030018186,0.007080995,0.0008223738,0.0009522992,-0.0006443253,-0.012333803,-0.012387331,0.016333573,0.004139623,0.004585716,-0.02852996,0.011437079]},{"t":"Data Scientist","e":[-0.019891102,0.0022282284,0.010739174,-0.0733523,-0.00650624,0.011987986,0.008579644,0.0006391304,-0.001643997,0.030576443,0.0044535105,-0.028171288,-0.010417616,0.006785522,0.09760541,0.011068182,0.00876826,-0.01591943,-0.0019511221,-0.0150273135,-0.01467002,0.004199355,0.016999926,-0.014737599,-0.02360401,-0.019295737,0.011621696,0.004210301,0.031751953,-0.0029528376,-0.0034158495,0.009981131,0.012998915,0.0038700514,0.01455348,0.010571365,0.009717121,0.000432366,0.01407058,0.018099623,-0.0070700245,0.02383307,-0.021413753,-0.028280536,-0.016752884,0.0024664793,0.0006580425,0.015446124,-0.025330104,-0.0006014073]},{"t":"Registered Nurses","e":[-0.030801,-0.0035045417,0.024062404,-0.03326803,-0.01598407,0.0065504927,0.010809156,0.021346351,-0.0044675968,0.025297781,-0.015748838,-0.011267195,-0.010470012,0.013834607,0.096551515,0.010248285,0.0056614513,-0.0020373946,0.0076744244,0.0035661596,0.00888541,0.006178351,-0.015499703,0.004651415,0.0070481375,-0.011995277,0.023922034,0.019736445,0.023748033,-0.030206017,0.012252322,-0.003200313,0.011265122,0.006899179,0.014833847,-0.0061074845,-0.01445275,0.004986164,0.0029935488,0.013423161,-0.0023809508,0.028465457,-0.013636085,-0.015743079,0.010367677,0.009634349,0.02181595,-0.0021110503,-0.014033429,0.025847178]},{"t":"Licensed Practical and Licensed Vocational Nurses","e":[-0.014165101,-0.029823963,0.011759464,-0.044252824,-0.014379259,0.01352406,0.015498057,0.030041257,0.0066872584,0.0069858106,-0.016841257,-0.008596937,-0.016705263,-0.016487654,0.10427277,0.013569448,-0.007172069,0.018416276,-0.0063836817,0.0120375855,0.0066334563,0.019845892,-0.008917878,0.0002066066,0.01403152,-0.0054620537,0.041675963,0.030980159,0.030980065,-0.020460911,0.0060467147,-0.004872011,0.012929367,0.008202789,0.015045877,-0.016506623,-0.002184032,-0.011256979,0.006702489,0.015510093,-0.008444146,0.016564427,-0.009953122,-0.005897309,-0.011174901,0.0072267926,-0.0081287,0.0004142087,-0.018513318,0.036542248]},{"t":"Mechanical Engineers","e":[-0.0022451621,-0.013856192,0.023615537,-0.03888663,-0.0016878389,0.01219988,-0.0017642815,-0.0026118953,0.025881281,0.017114986,-0.034498204,-0.0071768747,-0.007281195,0.00754766,0.1033763,-0.002000042,0.013705825,0.020267546,-0.0042208666,0.010359426,0.0008487929,0.004407602,0.009388194,0.007917597,0.00218336,0.0044917017,0.035712667,0.010043712,0.030561797,0.006621442,0.0028070798,-0.010555734,0.017894559,-0.0058149984,0.02742211,-0.023071878,0.016446676,0.00779693,0.024508167,0.023743866,-0.009064537,0.015780007,-0.023603646,-0.005552584,-0.006274201,0.0050534317,0.016056044,0.009506722,-0.021504536,0.00749724]},{"t":"Mechanical Engineering Technicians","e":[0.001525503,-0.012339114,0.016179591,-0.025778644,-0.0001320531,0.014032733,0.021328792,-0.0047517153,0.0110038975,0.026278684,-0.040162124,-0.0022881746,-0.0032975196,0.008312642,0.091454454,0.015308038,0.010619812,0.024885219,-0.012498859,0.012026551,-0.0040938603,0.008754073,0.025518453,0.0023127315,0.013412484,-0.009968073,0.03726597,0.021799544,0.03710531,0.009328729,-0.0011883086,0.00543901,0.029797735,0.01803176,0.016285326,-0.018119039,0.0011352858,0.003023775,0.010703683,0.027626986,-0.006334368,0.024094397,-0.030592361,-0.0025939583,-0.0017927688,0.0022039732,0.017132426,0.008553599,-0.037822608,0.00825811]},{"t":"Budget Analysts","e":[0.023537628,-0.006002489,0.0025824034,-0.05191739,-0.0026092282,0.030122278,0.015385547,0.0039456696,-0.015346414,0.010929119,0.0049902783,-0.022802897,-0.0077335183,-0.0069441637,0.079088084,0.009950777,0.002332475,0.021064276,-3.30246e-05,-0.004658344,-0.007085192,0.010027254,-0.0052235727,0.023788236,0.014860672,-0.032620516,0.018266523,-0.0065899272,0.017783351,0.0015635686,0.007440591,-0.006730369,0.0135215605,-0.0022915904,0.025479235,-0.02430454,-0.0012730302,-0.0068702167,0.0038258876,0.029273383,0.006091122,0.018674415,-0.0025563538,-0.017930822,-0.043613024,0.0066061607,-0.008017668,-0.023320945,-0.01857252,0.011717142]},{"t":"Credit Analysts","e":[0.012662023,0.012124566,-0.0029249683,-0.045404993,-0.02848862,0.025716126,0.001956271,0.0054239463,0.007088582,0.037589323,-0.026613887,-0.0035028504,0.0034335635,0.003225961,0.08139434,0.0063548274,-0.007752027,0.019174956,-0.007523051,-0.009247768,-0.012241603,0.032713793,-0.009859321,0.0076885913,0.012714091,-0.027853295,0.022300193,0.0033847264,0.03285447,0.020666506,0.014146478,-0.008913461,0.015727932,-0.0055948254,0.022933869,0.013761148,0.020618243,0.002241204,0.0147742545,0.0064192135,-0.0041152053,0.02220683,-0.016026106,-0.004650495,-0.036942374,0.0007564658,0.019065054,-0.023035817,-0.013122649,0.027854722]},{"t":"Financial Analysts","e":[0.019309528,0.011379412,0.0031625058,-0.059244774,-0.013257557,0.020523995,0.013918711,-0.0005589107,0.00315462,0.012750288,0.0049121967,-0.005786741,-0.002610106,-0.007497219,0.075297415,0.0018209458,0.000768317,0.021852097,0.0038783096,0.0030124036,-0.020744683,0.030635541,-0.023260616,0.0049040867,0.009855603,-0.031833313,0.031126855,-0.01348411,0.032998737,-0.008049456,0.022478618,-0.0019670299,0.013403704,-0.0045574987,0.028323006,-0.012388219,0.00779887,-0.0066642496,0.01890248,0.0072547845,-0.01977366,0.017092114,-0.022747884,-0.0036516418,-0.036140706,0.008566955,0.0122757135,-0.008116494,-0.016334243,0.026950708]},{"t":"Marketing Managers","e":[-0.030644132,-0.0006071476,0.023540542,-0.044497546,-0.003980186,0.015779376,-0.017824626,0.013962602,-0.006120377,0.013325055,-0.0060488204,-0.012737946,0.005922882,-0.030288761,0.09748182,-0.011767355,0.0002400376,0.007904154,-0.012828009,0.0020011324,-0.0017831262,0.0024319717,0.007389365,0.008070246,-0.016771989,-0.029915242,0.018222636,-0.0045502344,0.01490111,0.012661141,-0.009256258,0.005726221,0.017503588,0.024260966,0.028597308,-0.023180842,0.012336729,0.017563973,0.013131984,0.008747451,0.009627304,0.00224966,-0.016049478,-0.020349663,-0.02377953,0.021662248,0.014407242,-0.0015043297,-0.004180372,-0.005738363]},{"t":"Electricians","e":[-0.0060385317,-0.016644299,0.03428191,-0.033081476,-0.006867776,0.0027812738,0.01305487,0.010101361,-0.010583232,0.030901618,-0.0044389246,-0.010367585,-0.010904491,0.0011752836,0.11713271,0.000423545,-0.004356407,0.007236341,-0.007658721,-0.015712896,-0.007684177,-0.0014900637,0.0076557263,0.0013915,-0.01864768,-0.014890817,0.021635083,0.016826428,0.025445359,-0.014733114,0.012417951,0.005707041,-0.0026467876,0.0027737892,0.024157498,-0.03263096,0.014236549,0.01223739,0.0028053098,0.0010594449,-0.027472982,0.028353486,-0.014624509,-0.014855561,-0.012791153,0.0019925109,0.008348997,0.0039837863,-0.025402142,0.014443073]},{"t":"Helpers--Electricians","e":[-0.009165539,-0.012416557,0.032001402,-0.039157975,-0.008475026,0.014088587,0.0018954402,0.00251736,-0.020168407,0.017018862,-0.0031353515,-0.009802672,-0.0054894947,-0.0022039707,0.11865022,0.0025351327,-0.010628501,-0.0010222599,-0.011463212,-0.009811044,-0.0026554556,-0.010705271,0.0064582457,0.0038376572,-0.015100887,-0.006003847,0.020009674,0.004586895,0.033926696,-0.023916703,0.0076416605,-0.0049725003,0.0031090258,0.0036210155,0.012362209,-0.013054145,0.008871302,0.013827616,0.024676055,0.011651824,0.0017827707,0.023447022,-0.0027321007,-0.0095486175,-0.012105083,0.015368826,0.010849379,0.0066106347,-0.019405747,0.036574114]},{"t":"Business Teachers, Postsecondary","e":[0.015305275,0.01144171,-0.00414314,-0.04625911,-0.006417496,0.032734253,0.0066779978,0.036351815,-0.014714664,0.025230391,-0.018377522,0.005280443,0.0004188715,-0.018210417,0.10627282,-0.008544164,0.0128537,0.018591955,0.000380079,-0.010104079,-0.035490874,0.023440305,0.012304715,-0.0031966679,0.0048156553,-0.036696747,0.0344264,-0.0004185849,0.0010532605,-0.017439235,-0.0063384664,0.017324232,0.0055316575,0.023716606,0.015124984,0.0034345814,0.004354271,0.016513892,0.0036058081,-0.011237126,-0.0058761616,0.011799035,-0.0065886406,0.009263568,0.002680945,-0.0013598746,-0.0033059584,-0.016349245,-0.044765823,0.025897065]},{"t":"Computer Science Teachers, Postsecondary","e":[0.010737429,0.010468893,-0.01281193,-0.04270101,-0.01909025,0.03618455,0.0084013045,0.03125967,0.0039794133,0.029517898,-0.0046319077,0.005682612,0.016209984,-0.010883338,0.10814437,-0.006868777,0.0004496925,-0.015432911,0.020135382,-0.021243399,-0.024705349,0.011440449,0.016307829,-0.010067961,0.0009069762,-0.034297712,0.022169773,0.013280605,0.025691558,-0.015614814,-0.012165563,0.014208312,0.0066793244,0.016924566,0.0013115903,-0.0039584106,0.029202584,0.0056176814,0.005655804,0.007973805,-0.0067927553,0.021617252,0.014721629,-0.008530515,0.0002954854,0.0024040728,0.0004381427,-0.018993167,-0.046502147,0.04427621]},{"t":"Mathematical Science Teachers, Postsecondary","e":[0.019094894,-0.0033516334,-0.010271861,-0.034592498,-0.002174576,0.03265823,0.016336078,0.020524006,-0.0053304243,0.044501744,-0.0008056561,0.009444742,0.01661326,-0.0152098,0.0977205,0.0069664824,0.014808394,-0.013105292,0.009134082,-0.0065285843,-0.021957181,0.0057738023,0.011258456,0.002507667,0.0002932515,-0.029791892,0.025072848,0.0065150796,0.028511405,-0.018554129,-0.0073115914,0.0128640225,0.0050979177,-0.0018277116,0.019425957,0.0037588992,0.0017807513,0.012686995,0.02219517,0.010359766,0.00420396,0.028584875,0.013230587,-0.014344365,0.0064267297,-0.012605134,-0.0042817686,-0.011928305,-0.04095693,0.026630066]},{"t":"Architecture Teachers, Postsecondary","e":[0.0050713243,0.01803423,0.0047596293,-0.06635561,-0.009905101,0.027286513,0.01337882,0.0143383285,-0.005690853,0.028433328,-0.012269493,0.013129472,0.009750173,0.0027174258,0.11404012,-0.005486721,-0.0070792683,0.013655167,0.0052484567,-0.0275164,-0.023067297,0.014222856,0.01579295,-0.0022505196,0.008431747,-0.02166669,0.018812906,0.011510613,0.0022866214,-0.01663431,-0.008208293,0.016776383,-0.0047437376,0.009467691,0.005348619,-0.001924555,0.0001957167,0.016879024,0.01260148,-0.015882686,-0.0010964398,0.024700362,0.010520141,-0.009359133,0.011209093,0.0001675357,-0.0030553422,-0.021683218,-0.047894873,0.019416908]},{"t":"Engineering Teachers, Postsecondary","e":[0.016108966,0.009074791,-0.0030458956,-0.03838792,-0.0075113387,0.019988,0.013206439,0.013734397,-0.0008551531,0.017848603,-0.028855223,0.014497939,0.011392957,-0.007815437,0.11121166,0.0066884207,0.026636256,-0.0083679585,0.006735739,-0.015560577,-0.020029733,0.0030026,0.008720094,-0.0026116832,-0.0045996946,-0.029317195,0.027167466,0.011654299,0.0170526,-0.009133391,-0.0031847744,0.019721368,0.0021046724,0.015364755,0.0128019955,-0.014848466,0.013802982,0.009932566,0.021008914,-0.0062882565,-0.008609973,0.028028289,0.0056491657,-0.012786387,0.0038847376,-0.0059611644,0.0039963727,-0.002358043,-0.044294048,0.026269166]},{"t":"Agricultural Sciences Teachers, Postsecondary","e":[0.016374633,0.0154625345,-0.007815637,-0.032288715,-0.0053005917,0.027932,0.01080135,0.03767661,-0.01260653,0.044109106,-0.022161908,0.024193604,-0.005362571,-0.009212672,0.1166864,-0.0011753576,0.017510058,-0.005774405,0.0055830376,-0.023208503,-0.026568942,0.011679233,0.010750168,-0.002556029,0.0060379277,-0.019353192,0.028698012,0.009073587,0.011207068,-0.0022586945,-0.0025378314,0.011720495,0.0027320953,0.013918629,0.022603039,-0.0013452177,0.012042153,0.0021613722,0.012899881,0.004645345,-0.009347407,0.040748768,0.0058742603,-0.008702141,0.008643597,-0.008614041,0.008363526,-0.021290652,-0.040684823,0.02132808]},{"t":"Biological Science Teachers, Postsecondary","e":[0.023622932,0.011511097,-0.013815495,-0.037322465,-0.0040107924,0.020371512,0.011940762,0.0417155,-0.0055482173,0.029120483,-0.011084456,0.007931236,-0.001350512,-0.012878574,0.11005956,0.0070428466,0.013642832,-0.016039284,-0.0028356588,-0.026886655,-0.012078285,0.010487642,0.0023941696,-0.014943554,0.0051019285,-0.008594131,0.027715541,0.0008557108,0.022656912,-0.0106037455,0.0026558777,0.014033271,0.009186993,0.00979037,0.015201003,-0.0041474057,0.013216874,0.011871636,0.0068042413,-0.004152544,-0.003678415,0.026797256,-0.0006088111,-0.004867875,0.000364588,-0.0035105003,0.01389408,-0.01764925,-0.033421937,0.034343187]},{"t":"Forestry and Conservation Science Teachers, Postsecondary","e":[0.018444031,0.009377659,0.006580601,-0.041904025,0.0009553456,0.033769175,0.0001288732,0.029808288,-0.0016457302,0.030021304,0.005293773,-0.004510384,-0.005536513,0.0010803427,0.10439089,-0.0017395582,0.013769783,-0.011365923,0.02229889,-0.036070533,-0.024417931,0.017857831,0.018586561,-0.008810056,-0.0098556755,-0.036486074,0.022031765,0.02492364,0.0017917069,-0.022433067,-0.005840148,0.01884305,0.01846423,0.0002447174,-0.0031545567,0.004422814,0.011784126,0.013730984,0.01832796,-0.01576336,0.0007935647,0.039946232,0.00733949,-0.0055951835,0.0045865565,0.0002093599,0.006958039,-0.024794461,-0.028072303,0.030031083]},{"t":"Atmospheric, Earth, Marine, and Space Sciences Teachers, Postsecondary","e":[0.0077689365,0.0027549802,0.00025408,-0.060170118,0.0001255579,0.02592369,0.0077090743,0.004497574,0.005064919,0.04150174,-0.014656312,-0.004002264,0.005581274,-0.009801295,0.11172822,0.01806735,4.23648e-05,-0.006289445,0.0029113104,-0.01747401,-0.01993427,0.010599203,0.027227769,-0.02109592,0.012344544,-0.023535507,0.018702596,0.017271178,0.021136783,-0.010997099,0.0069322693,0.02221104,0.010451292,0.018756224,0.025717475,-0.010985909,0.021207297,0.023678403,0.017285874,-0.025284912,-0.004667665,0.024340939,0.023349604,4.154e-05,0.008549574,-0.0019455218,0.009345802,-0.015181449,-0.01632689,0.033368394]},{"t":"Chemistry Teachers, Postsecondary","e":[0.02006531,0.0011975154,-0.00340323,-0.044651944,0.0013264983,0.036952652,0.004278639,0.024411298,-0.012500743,0.031728238,-0.002673966,0.012179817,0.003562387,-0.0062774518,0.10953482,-0.00893264,0.0006024509,-0.0051297275,0.0064162933,-0.019962726,-0.039998297,0.024338942,0.018421466,-0.005197956,0.0004606255,-0.032323487,0.024296764,0.007039478,0.019275429,-0.0044530877,0.0012480264,0.016115775,0.007853784,0.016038593,0.0040567233,0.004046301,0.013507135,0.010239989,0.0266281,-0.001310441,-0.0053346003,0.03448623,0.015506771,-0.011846052,-0.009458206,-0.01635052,0.0070316484,-0.013084845,-0.037799522,0.03753913]},{"t":"Environmental Science Teachers, Postsecondary","e":[0.011270175,-0.0011354224,0.005274051,-0.047442038,0.0019161691,0.022112293,0.0017576941,0.028001964,-0.0009221702,0.0331157,-0.012253591,0.015131635,0.010425351,0.0026219995,0.10932861,0.0015265992,-0.005564867,-0.012078382,0.0039793267,-0.014824696,-0.02439112,0.011280984,0.0058890735,-0.00809103,0.0032300584,-0.026589725,0.031138122,0.016136458,0.014408521,-0.026962522,-0.0009368032,0.01764745,0.015590605,0.011669384,0.016809564,-0.0049630185,0.02978577,0.011311348,0.007726918,-0.016232993,-0.0005041186,0.024116483,0.01324436,0.0001286509,-0.01290246,-0.0022540689,0.009778161,-0.0049133888,-0.0374261,0.029904302]},{"t":"Physics Teachers, Postsecondary","e":[0.016996473,-0.012888769,-0.0004343475,-0.05044905,-0.0007161786,0.036367867,0.015571698,0.024278885,-0.0046600825,0.02907931,-0.016129166,0.016129494,0.0015325517,-0.0071449773,0.097803436,0.0046320576,0.006288417,0.0047264653,0.0084138,-0.0087485,-0.030471276,0.011869082,0.013135024,-0.000709479,0.0066370657,-0.027472345,0.032669004,0.005854497,0.03340523,-0.00870537,-0.0043869345,0.02769962,0.008847895,0.011730334,0.01586708,-0.0051587047,0.010006317,0.01951211,0.025491087,-0.0122533785,-0.0039992873,0.027819399,0.019190248,-0.009037366,0.0049853744,-0.015422929,0.0043789456,-0.012752651,-0.036648337,0.030764213]},{"t":"Anthropology and Archeology Teachers, Postsecondary","e":[0.013984243,0.009898747,-0.0013647202,-0.04182163,-0.00805524,0.029878445,-0.0006680225,0.034186773,-0.023426061,0.031288143,-0.005132847,0.0008491439,0.0076784277,-0.0029967101,0.11179202,-0.012060594,0.008858411,0.010756714,0.016643884,-0.028696442,-0.033317894,0.005855393,0.014133759,-0.0070986883,0.0054051043,-0.026865194,0.004475664,0.0017235634,0.012777497,-0.011182633,-0.008603649,-0.008042545,0.0001374837,0.017010722,0.030274056,-0.011422898,0.010462751,-0.0047863694,0.019620894,-0.015916353,-0.008727658,0.028371412,-0.0021702053,0.0046156766,0.012152781,-0.011406476,0.009266733,-0.023061503,-0.03881514,0.016666817]},{"t":"Area, Ethnic, and Cultural Studies Teachers, Postsecondary","e":[0.012050747,0.014566343,-0.011001159,-0.040658098,-0.009101423,0.018204087,0.011233799,0.016933253,-0.017402353,0.041819263,0.002789206,-0.002876976,0.0071347095,0.004302829,0.106338754,0.0045261136,0.01183756,-0.0008202238,0.021888876,-0.01684636,-0.011802756,0.015249721,-0.010177277,-0.0020173336,0.0014993997,-0.010929378,0.010946898,0.0006064622,0.009359016,-0.03616102,-0.0015131684,0.008129963,0.011743842,0.0001204761,0.027003897,-0.013313727,0.008131221,0.014673055,0.0038275183,-0.011456512,-0.015876008,0.004451226,-0.0005957105,0.019977285,0.0027744672,-0.0056375647,-0.013213766,-0.020275874,-0.037377477,0.018320246]},{"t":"Economics Teachers, Postsecondary","e":[0.02094599,0.008485039,-0.011570147,-0.051683977,-0.0040864535,0.024254557,0.0023675368,0.012199312,-0.013910236,0.021264566,-0.009914869,0.01835867,0.0028570213,-0.009760979,0.11261278,-0.0013182043,0.022310115,0.017670216,0.01027177,-0.01877269,-0.026237354,0.016210373,0.0021366207,0.009781468,0.0050271205,-0.023288617,0.0209955,-0.003151575,0.015038654,-0.007122005,-0.0035268627,0.01782828,0.0008807359,0.019019213,0.017811995,-0.010149244,0.014334868,0.019531291,0.002794156,0.0037995044,-0.00874481,0.025858058,-0.007942788,0.0048432956,0.002665095,0.007110294,0.0029033723,-0.01581674,-0.046712436,0.030991584]},{"t":"Geography Teachers, Postsecondary","e":[0.016483031,0.006449739,0.0016140377,-0.038231477,0.0042331405,0.031613376,0.007637115,0.0138523765,-0.014332383,0.026871111,-0.014811283,0.01598172,0.0007593319,0.004826704,0.108724415,0.003389709,0.008946894,0.015672132,0.020442536,-0.013720368,-0.024143608,0.010935071,0.0072970307,-0.016096065,0.013232876,-0.0309431,0.014566422,-0.005734646,0.013627991,-0.017258245,-0.006024448,0.003599837,0.023842715,0.00694525,0.0061551756,-0.009217367,0.020586329,0.025540661,0.010191454,-0.019886285,-0.0023580347,0.019365814,0.0065921713,0.0004057904,-0.008407498,-0.0046265954,0.010263852,-0.018060902,-0.033411942,0.032295603]},{"t":"Political Science Teachers, Postsecondary","e":[0.014915264,0.011491921,0.008198864,-0.039345168,-0.003230947,0.022629505,-0.0070980377,0.03616658,-0.0031371538,0.012032876,-0.025971834,0.0021477533,0.008480603,-0.015073618,0.102698915,-0.0011431942,0.0063816076,0.009970813,0.028959295,-0.0048124585,-0.023598181,0.0125908,0.004659347,-0.0020348066,0.018294487,-0.0385228,0.02950102,-0.0055609033,0.009829609,-0.031785227,-0.0063176886,0.023724914,0.021911897,0.016228223,0.022480989,-0.008164171,0.015555986,0.013228845,0.016725365,0.006867241,-0.0017827476,0.023834432,0.0055407407,0.0030301104,0.012030196,-0.0012991739,0.009235508,-0.016630659,-0.050142217,0.023880923]},{"t":"Psychology Teachers, Postsecondary","e":[0.01174149,0.0012761424,-0.007446601,-0.026336411,0.0013362799,0.022288788,-0.0036932977,0.02404402,-0.006647192,0.026537824,-0.006895559,0.014204205,0.0012478484,-0.005161844,0.10961366,0.011272937,0.012252399,0.0054560527,0.015519978,-0.023954641,-0.03617291,0.019970695,0.007281449,0.0011480458,0.004964254,-0.03304643,0.028085312,-0.009979641,0.008367346,-0.008807373,0.0037046324,0.032388605,0.008938884,0.0207611,0.021994961,-0.012545107,0.02026329,0.0038716926,0.011607001,-0.0048435596,-0.0005565319,0.024185644,0.004116264,0.006315822,0.015957436,-0.0067066276,0.0037787803,-0.006390105,-0.055476785,0.027760178]},{"t":"Sociology Teachers, Postsecondary","e":[0.028756855,0.013532183,-0.006056795,-0.03754018,-0.006783429,0.021764996,0.0056291614,0.026663171,-0.0150797805,0.03250948,-0.011287026,0.0012289357,0.011693104,-0.0075245094,0.11542383,0.0053950925,0.011903828,0.008840331,0.025299307,-0.0030526707,-0.033174887,0.014094891,-0.0001425378,-4.27777e-05,0.004115507,-0.01793533,0.00895378,-0.011350799,0.011640252,-0.016772404,-0.0027840363,0.01936545,0.018734837,0.021805229,0.024813615,0.012263872,0.016506027,0.006773892,0.007908142,-0.006079345,-0.0066437265,0.03241421,0.006618431,-0.00451335,0.0032899305,0.0010833903,0.0012666872,-0.02267386,-0.038740292,0.0137760565]},{"t":"Health Specialties Teachers, Postsecondary","e":[0.018275753,0.009268916,-0.0074091097,-0.035029035,0.000830345,0.013477633,0.004695647,0.021302126,-0.016656276,0.028345363,-0.007230549,0.0002235771,0.0105320895,-0.013302092,0.093736134,0.0064489827,0.010113502,0.010638741,0.0064728465,-0.009106385,-0.025428591,0.020783398,-0.0002096911,0.0009529998,-0.0013376143,-0.044099122,0.030428084,0.0183338,0.012174639,-0.014450126,0.0001294815,0.0152388085,0.008170498,0.027369244,0.035317473,-0.011287903,0.008261311,0.019269269,0.01211108,0.018534597,0.0067413533,0.02206401,0.014234071,-0.0145784905,0.010407899,0.0064573525,0.008752955,-0.0040393807,-0.027835112,0.04953133]},{"t":"Nursing Instructors and Teachers, Postsecondary","e":[0.014122974,-0.0007046193,-0.009704821,-0.029524691,-0.010572255,0.026082167,0.010680771,0.033756897,-0.027839193,0.028188793,-0.014007643,-0.0016683212,0.0023353645,-0.010820035,0.11149735,0.006725589,-0.00912039,-0.0001630026,0.027552804,-0.021040726,-0.01880961,0.025870278,-0.0108652115,0.01675558,0.018948028,-0.019618765,0.018722627,0.020354947,0.005003585,-0.013380342,0.004288239,0.020235911,0.010688117,0.012417566,0.028089512,-0.004248075,-0.00403186,0.009616526,0.014046658,-0.0009315202,-0.0022641441,0.029539837,-0.0042801495,-0.0147263585,0.014439949,0.006171932,0.007519313,-0.0050977804,-0.025763463,0.042118225]},{"t":"Education Teachers, Postsecondary","e":[0.026185472,0.0048761503,2.65528e-05,-0.036385037,-0.014480682,0.01172163,0.0064084386,0.028226966,-0.008803787,0.027162839,-0.008782426,0.0027662003,-0.0026897013,-0.0051415605,0.10685091,-0.0007152121,0.01034662,0.0030128967,0.0015179808,-0.019968277,-0.022091918,0.01639553,0.003393105,0.0037471578,-0.009656019,-0.03547289,0.02591129,0.004915993,0.008572593,-0.012625712,-0.0013459647,0.019580606,0.0126426425,0.021046381,0.017026668,-0.000842567,0.00898837,0.011403487,0.011620551,0.0020219297,-0.0018408181,0.026184415,-0.005197581,-0.0049645063,0.0045504053,8.97199e-05,-0.00402726,-0.013990093,-0.053313136,0.034105826]},{"t":"Library Science Teachers, Postsecondary","e":[0.013897229,0.0052491943,-0.009497086,-0.04318541,0.0041744006,0.029074594,-0.010131361,0.03711794,-0.008433369,0.025546826,-0.010813534,0.005079649,0.01015526,-0.017632915,0.10238262,0.0033457265,0.004539267,0.007120144,-0.004706727,-0.027535418,-0.023450468,0.006455681,0.020073285,0.003402042,0.00997778,-0.02616746,0.03308106,0.008374932,0.007200614,-0.025986608,-0.009023736,0.016946604,0.010920283,0.010608738,0.036374874,-0.011407295,0.0025185763,0.0050415024,0.016491292,0.007609053,-0.0002225063,0.040237263,-0.0007231305,-0.008080307,-0.009164953,3.91011e-05,0.013870822,-0.0033453705,-0.058060434,0.027348341]},{"t":"Criminal Justice and Law Enforcement Teachers, Postsecondary","e":[0.010605693,0.013344916,0.002748809,-0.02612901,0.007475348,0.03302823,0.0057483264,0.031896595,-0.01106473,0.031536244,-0.021227807,0.008202176,0.006322038,-0.011093714,0.1099513,0.017426323,0.0046267654,-0.0008424334,0.016426416,-0.012851095,-0.034782358,0.006349312,0.011657631,-0.0018381544,-0.0032052859,-0.040479757,0.02133852,0.026737446,0.006098448,0.0018196783,0.000349344,0.0192655,0.018194655,0.002063703,0.007102925,0.0004969914,0.013629559,0.0062377867,0.011931966,-0.014299357,-0.01276414,0.028643698,0.0018127088,0.015732527,0.013141977,0.0030970632,0.0049116393,-0.011533361,-0.043699767,0.030337455]},{"t":"Law Teachers, Postsecondary","e":[0.027188806,0.010739769,-0.008176306,-0.039439455,0.0025324037,0.017426737,0.01573912,0.025777632,0.0032946747,0.03392373,-0.014947066,0.0077962894,-0.0012221155,-0.0142969545,0.10565324,0.008626804,0.0019251478,0.017803332,0.019726079,-0.02593025,-0.022069514,0.013856069,0.014077957,-0.009514047,-0.0046655354,-0.024345556,0.031319305,0.011640251,0.02636204,-0.012678237,-0.0038013505,0.023442186,0.012467731,0.020278137,0.006251893,-0.0057790927,0.017421003,0.005578817,0.0077911024,0.0030972974,-0.010639229,0.026018256,-0.006483216,-0.005040884,0.019933734,0.0085491445,0.01244283,-0.023758663,-0.06057299,0.026012292]},{"t":"Social Work Teachers, Postsecondary","e":[0.028380435,0.010993748,-0.013758091,-0.04729692,-0.007694323,0.015253612,0.013598605,0.029989237,-0.020578215,0.028302114,-0.0036326288,0.013172894,0.012492321,-0.0042248317,0.10281981,0.012981238,0.015535048,0.03320356,0.0003652073,-0.029393645,-0.027009575,0.010013953,0.010339338,-0.010567902,0.0114237005,-0.020199636,0.025752934,-0.006142253,0.010606717,-0.03257376,0.004315198,0.01816413,0.01668008,0.016764496,0.020556355,-0.010239451,0.018714553,0.0048888163,0.009806028,0.0005655282,-0.009698262,0.023675919,-0.004617491,-0.007920684,0.004495264,0.004419143,-0.011603778,-0.026440894,-0.0437436,0.028537238]},{"t":"Art, Drama, and Music Teachers, Postsecondary","e":[0.003097158,-0.0059009064,-0.00239333,-0.07491041,8.66553e-05,0.037384234,-0.013763403,0.024511596,-0.015143504,0.019871106,0.0011728795,0.0077136206,-0.003668642,-0.016799223,0.11579205,-0.005612616,-0.0078043956,0.012024376,0.0019822947,-0.011707721,-0.029046316,0.002067735,0.0007948274,0.0001136621,-0.0040642405,-0.029906198,0.020597195,0.027792335,0.0140404925,-0.018927626,-0.0036948556,0.01690017,-0.0002175448,0.022014555,0.0467809,0.0030058427,0.003099813,-0.0025443912,-0.001857238,0.014354184,-0.0056549744,0.015386987,0.00708634,-0.0007298724,0.01548506,0.008553015,-0.009734006,-0.030086897,-0.041696552,0.025087265]},{"t":"Communications Teachers, Postsecondary","e":[0.019499823,0.014011016,0.005747188,-0.030932173,0.0038864792,0.030298326,-0.0033374245,0.030161863,-0.000242938,0.019073458,-0.007221314,0.008353057,0.010613832,-0.0062485873,0.103118815,0.0036799866,0.0076148566,-0.0014488158,0.01975674,-0.0070568454,-0.018372241,0.017829081,-0.0010158715,0.009202861,-0.013302577,-0.03870396,0.02731054,-0.0002143956,0.009632496,-0.014518701,-0.005627581,0.017872691,0.0042766156,0.014663633,0.03602417,0.000414397,0.023919448,0.0008108547,0.000566493,-0.0009252576,-0.008114542,0.034674052,-0.007479241,-0.0021578474,0.010440949,-0.0053041913,-0.003065982,-0.011188861,-0.03177379,0.045706756]},{"t":"English Language and Literature Teachers, Postsecondary","e":[0.02605026,0.0067577288,0.0019499895,-0.03758553,-0.004089493,0.030028058,-0.002324018,0.031011121,-0.014415408,0.027726138,-0.0067587458,0.0034701163,0.0059570917,-0.003938052,0.09678415,0.0038899058,0.004441276,0.01834616,0.019506501,-0.01914976,-0.020226834,0.023367753,-0.00379338,0.017212026,-0.011673705,-0.030878134,0.024041222,0.0018769163,0.0107734455,-0.020173823,0.006695652,0.019857641,0.000976453,0.02450377,0.0287886,-0.006984805,0.0049562724,0.004319314,0.015696323,-0.0016607196,-0.017421374,0.03133494,0.0030394688,-0.009385833,0.009642322,0.0073836823,5.89256e-05,-0.011239381,-0.055787183,0.021943763]},{"t":"Foreign Language and Literature Teachers, Postsecondary","e":[0.017043693,0.0097392425,0.007250831,-0.048836272,0.0089420695,0.019813988,-0.011445897,0.031139495,-0.0062827594,0.015452062,-0.0011682293,0.0023389626,0.015823629,-0.008716978,0.10261104,-0.0046677524,0.009864069,0.014578546,0.010192512,-0.027762873,-0.029042719,0.022255313,0.0028107371,0.0052113663,-0.005729988,-0.022677656,0.010109832,0.01051823,0.011414168,-0.02155679,0.01678329,0.019051755,0.021660546,0.011682285,0.024093498,-0.0049701007,0.0005930756,0.00748625,0.019612886,-0.0013826028,-0.007208042,0.026892051,0.0055544777,-0.0039826,0.007936252,0.013854991,-0.01770193,-0.012164663,-0.05572444,0.035648312]},{"t":"History Teachers, Postsecondary","e":[0.020178096,0.014918979,0.0039288537,-0.03998381,-0.0049645444,0.021338996,-1.16628e-05,0.018973341,-0.025362859,0.0303625,-0.0026646513,0.0041654846,-0.0016357934,-0.0054888166,0.10749803,0.0032140447,0.013921979,0.009659465,0.004180456,-0.012400495,-0.028879637,0.014506593,0.0034937658,-0.007741985,0.015651055,-0.025345676,0.01728723,-0.011677145,0.0037008442,-0.012528634,-0.0003599683,0.018026939,0.0007765883,0.013783481,0.029785236,-0.0026966229,0.007269958,0.007988126,0.01885922,0.009841018,0.0023545206,0.016554337,0.0027576257,-0.003649288,-0.0020014658,-0.01076837,-0.0015650976,-0.013645572,-0.04359354,0.04029963]},{"t":"Philosophy and Religion Teachers, Postsecondary","e":[0.0101900585,0.0031417182,-0.0038932397,-0.040929075,-0.000853371,0.009958306,0.0019611917,0.02841669,-0.010866127,0.02288213,-0.0141796125,0.0072226254,0.006473624,-0.0043921685,0.10106929,0.019925682,0.0069757155,0.014543281,0.026031723,-0.0075855413,-0.036535464,0.01213217,-0.010460316,-0.015620106,-0.0033975611,-0.024915991,0.035441346,-0.005813791,0.023357844,-0.022296844,0.0032746347,0.009034834,0.003987012,0.019306777,0.027936162,-0.004400488,0.007061354,0.004411787,0.0068208976,-0.0029449635,-0.018083258,0.0346744,0.010738261,0.004948259,0.012085624,-0.006467746,0.0031699575,-0.017574236,-0.031536717,0.021443944]},{"t":"Graduate Teaching Assistants","e":[0.028762301,-0.0025271946,-0.002610939,-0.024972921,-0.004860909,0.020604666,-0.008107358,-0.0043789516,0.008750631,0.051054355,-0.0057379147,0.009015853,-0.013868575,-0.008022418,0.11009596,-0.0018963678,0.0021765933,0.0002601183,-0.0040594037,0.0022235399,-0.009766339,0.01933929,-0.0048482292,0.013502741,0.009573023,-0.021343654,0.028016053,0.0143043995,0.043812197,-0.008617156,-0.0054550427,0.014549509,0.006840151,-0.006469733,0.0148262475,-0.0004327959,0.018902745,-0.00488251,0.027198019,0.008786395,-0.004396376,0.020886635,-0.025082203,0.005601219,-0.010720908,-3.87168e-05,0.0077179614,-0.011112969,-0.039961785,0.025644878]},{"t":"Home Economics Teachers, Postsecondary","e":[0.016719313,0.0206341,0.013022308,-0.019038718,-0.014631296,0.024340412,0.005692199,0.025544511,-0.012988767,0.02789131,-0.009661195,0.019125866,0.0076543326,-0.011655189,0.11427604,0.01008352,0.015589987,0.018866915,-0.004022711,-0.014090813,-0.023483496,0.017837996,0.018279955,0.014882705,0.001534722,-0.016826605,0.01750666,0.0024263905,0.008934631,-0.01134902,0.005899205,0.01858043,0.0019281937,0.009530522,0.030922802,0.0002680584,0.020921195,0.01012146,0.0040818504,0.0068661333,-0.010501457,0.019471787,0.0006306321,-0.005547613,0.015276582,0.01179428,-0.005450707,-0.008695462,-0.02545494,0.034592845]},{"t":"Recreation and Fitness Studies Teachers, Postsecondary","e":[0.01574821,0.0087033985,0.009373867,-0.037138265,0.012773505,0.027790755,0.021756843,0.022569166,-0.02857425,0.027724488,0.0044319043,0.0029064452,0.0003234674,-0.0019086626,0.10460054,0.0012649,0.0010458347,-0.005944213,0.020938098,-0.011786344,-0.03028528,0.025118653,-0.0042728675,-0.002422139,0.0039390167,-0.031843115,0.03201187,-0.0016556209,0.02624647,-0.024723971,-0.004120864,0.012622048,0.017361742,0.018648246,0.018497227,-0.0035834424,0.009608806,0.013217881,7.70351e-05,-0.0004461876,-0.008319052,0.001194824,0.009979555,-0.001871877,0.0053839823,0.014293077,-0.0031350097,-0.002101809,-0.028080566,0.034411397]},{"t":"Vocational Education Teachers, Postsecondary","e":[0.015427602,-0.0025784643,-0.002243995,-0.04130904,-0.0056759217,0.032849625,0.008527917,0.016901977,-0.012042824,0.029796591,-0.010874235,0.016903127,-0.0034655628,-0.015227932,0.11213667,-0.0019451074,0.01883783,0.011393508,8.33628e-05,-0.03174695,-0.024305264,0.0036987644,0.010349272,0.005142641,-0.002539331,-0.034296323,0.02326659,0.01276654,0.0072952267,-0.011762004,-0.007550847,0.010934824,0.018419024,0.016477924,0.018776119,-0.01140178,-0.0009236698,0.016687555,0.011856391,-0.00157711,-0.016128372,0.016876899,0.019658653,-0.0016811134,0.0021562604,-0.004237867,0.0029859494,-0.004147171,-0.03707818,0.039841063]},{"t":"Preschool Teachers, Except Special Education","e":[0.0039263684,0.008578047,0.015663175,-0.026459703,0.006037515,0.030338923,-0.00807591,0.020548977,-0.01945289,0.021224523,-0.004955198,-0.018036492,-0.02288466,-0.02962455,0.100485675,-0.010290964,0.008066308,0.011818577,0.0084400615,-0.015413644,-0.0052360776,0.019722406,0.01505397,0.009935099,0.0048791505,-0.024494553,0.025513096,-0.0022346275,0.0234454,-0.018111011,-0.011796923,0.0070464783,-0.02111374,0.021880666,0.050279003,-0.0026206025,0.009173088,0.0135348225,0.016719626,0.015270331,-0.010045523,0.008349817,-0.0012210758,-0.013864664,0.00425164,0.019529972,-0.016433027,-0.008195204,-0.028264923,0.016106233]},{"t":"Kindergarten Teachers, Except Special Education","e":[-0.007947861,0.005836039,0.015974706,-0.027231406,0.011791215,0.032955572,0.0005589244,0.008340205,-0.005160437,0.018590152,0.0033593976,-0.016495757,0.002414296,-0.016952995,0.10780647,-0.008605453,0.0042592655,0.018806966,-0.003223964,-0.01389659,-0.009748873,0.018038876,0.027816176,0.010171173,0.0003572086,-0.01535333,0.025310712,0.0058284416,0.02014325,-0.015083305,-0.01655373,0.0058273356,-0.01300122,0.011706788,0.042811178,0.0020142198,0.023907658,0.000976534,0.021311635,0.013141801,-0.009023855,0.0036045543,-0.001718848,-0.006800218,0.009859689,0.011905822,-0.0054586604,0.011106321,-0.023690656,0.021731928]},{"t":"Elementary School Teachers, Except Special Education","e":[-0.010765964,-0.0045443987,0.015958855,-0.03801876,0.008369658,0.03189,-0.012834104,0.009626593,-0.0016962106,0.030590689,0.0007823656,-0.017239045,-0.02103332,-0.012857525,0.09802602,-0.0069701793,-0.0030804568,0.010378214,-0.007512295,-0.014339452,-0.007179563,0.022590945,0.021803146,-0.0068066106,-0.0015511964,-0.016292661,0.019021776,0.0039765197,0.027892562,-0.01823013,-0.008502928,0.023201583,-0.014169018,0.008806101,0.041847095,-0.004718406,0.021513736,0.0072929957,0.013199941,0.013003134,-0.011764451,0.009460652,-0.009886851,-0.013721176,0.0150437355,0.005684954,0.0051863454,0.006936957,-0.027441602,0.018051311]},{"t":"Middle School Teachers, Except Special and Vocational Education","e":[0.015751604,-0.016259918,0.011043261,-0.046760496,0.008514303,0.03568236,0.0019338793,0.018495426,-0.0063820616,0.046712827,0.0006480144,-0.014436649,-0.02287255,-0.013553419,0.089209765,0.008050557,0.0021821007,0.006657246,-0.016781725,-0.013452819,-0.0013772064,0.0174887,0.009338331,-0.0005549604,0.016996872,-0.006273641,0.019847944,0.020144096,0.020898284,-0.03517851,-0.018432636,0.025091538,0.015258843,0.0072378595,0.03052209,-0.0024224182,0.016680948,0.004756821,0.012801415,-0.010048574,-0.013193191,0.005290584,-0.0045049414,-0.014489669,0.0066994554,0.0155169,-0.010188832,0.012053514,-0.02691815,0.020529833]},{"t":"Vocational Education Teachers, Middle School","e":[0.02054867,-0.016159214,0.023762686,-0.041206263,0.0043460587,0.037651855,0.016553337,0.014664858,0.0042787646,0.045511127,-0.004117784,-0.004830982,-0.017020334,-0.009772092,0.09302851,0.013343931,0.0079944255,0.0036796255,-0.022483565,-0.025433892,-0.012801605,0.0050038435,0.010634561,0.0013819833,0.007987143,-0.025218228,0.020184034,0.007817846,0.012986358,-0.03241517,-0.012133334,0.024908097,0.010554725,0.010241168,0.025033247,-0.00960765,0.007425225,0.007702569,0.008835516,0.0005425563,-0.019658577,0.006060567,0.0034871197,-0.019512968,-0.015735453,0.007979457,-0.0035362197,0.013887915,-0.025204873,0.040145524]},{"t":"Secondary School Teachers, Except Special and Vocational Education","e":[0.018285373,-0.014927105,0.01755632,-0.04334617,-0.0037503957,0.027410088,0.006846306,0.014466029,-0.007991805,0.03479742,-0.0065374114,-0.008054353,-0.01877896,-0.01026399,0.10482817,0.0044260886,-0.0078455005,0.0031083247,-0.0077443463,-0.017975805,0.0006989263,0.017300244,0.013464215,-0.006795883,-0.0011258866,-0.012188576,0.008169477,0.009225979,0.027110444,-0.028294047,-0.02099435,0.025663665,0.0038237951,0.022664199,0.025636805,-0.0006212878,0.017214924,0.0028216941,0.014363383,-0.011885976,-0.006725942,0.005189077,-0.0058365297,-0.008301512,0.013167052,-0.001434319,-8.5703e-06,0.0063675162,-0.026619311,0.011229072]},{"t":"Vocational Education Teachers, Secondary School","e":[0.010939092,-0.0077644633,0.025229104,-0.033098422,-0.0068174917,0.028604604,0.018514365,0.0074976417,0.0014461168,0.038787,-0.010854607,0.009828487,-0.011467003,-0.0039104535,0.11188652,0.014184977,0.008326844,-4.80211e-05,-0.014357692,-0.0177123,-0.008946439,0.0048549455,0.012195729,-0.0010257062,-0.0051914663,-0.023750585,0.018981565,0.015666885,0.01507539,-0.025158124,-0.013309941,0.019833304,0.018451085,0.023672622,0.02118856,-0.015394604,0.00649985,0.0093126055,0.013305906,0.003032869,-0.009464368,0.010200249,0.0013138729,-0.008946516,-0.010527627,-0.003475529,0.0059556314,0.0037642638,-0.035211768,0.04240328]},{"t":"Special Education Teachers, Preschool, Kindergarten, and Elementary School","e":[-0.014470886,0.0037288442,0.01326084,-0.03394035,-0.0021826648,0.026607577,0.011599481,0.02058091,-0.0043915496,0.0047580698,0.009729255,-0.0116620185,-0.0018901463,-0.027076757,0.0974455,0.017909523,0.008059562,0.011319024,-0.013436679,0.0030751182,-0.010067155,0.012810104,0.03369876,0.011824816,-0.010439739,-0.022544723,0.025399486,-0.005033954,0.018766997,-0.020502804,-0.018399347,0.018545715,-0.010416227,0.0068402328,0.03247895,-0.009527508,0.018258005,-8.95168e-05,0.01637968,0.019006733,-0.01789059,0.022293473,0.013014465,-0.013711276,-0.004913927,-0.0068034823,-0.016910134,-0.002708726,-0.035447698,0.038713522]},{"t":"Special Education Teachers, Middle School","e":[0.010395733,-0.010152566,0.0027829434,-0.04911423,0.0034281134,0.028634919,0.021835413,0.0057746363,0.0076927664,0.03304367,0.011049773,-0.02189827,-0.009472059,0.0014595855,0.078334704,0.015428409,-0.000667435,0.009677785,-0.017344896,-0.014759161,-0.011118832,0.0077615054,0.015476635,-0.0053989696,0.00962483,-0.029571168,0.016540254,-0.018040279,0.022960192,-0.030522047,-0.015425896,0.02759806,0.00917414,0.00541509,0.03853739,-0.009400547,0.00984077,-0.0004535819,0.004184905,-0.0002866488,-0.0032556779,0.021639302,0.0076710335,-0.03131925,-0.018203892,-0.0033179477,-0.006554068,0.014171873,-0.038968865,0.03565152]},{"t":"Special Education Teachers, Secondary School","e":[0.0019051356,0.003934692,0.0003409978,-0.04463552,-0.00858533,0.020720161,0.02494414,0.00768618,0.006946383,0.018341754,0.0064779054,-0.0044014393,-0.000920228,0.006097006,0.097885974,0.02728534,0.0010739239,0.0067317155,-0.009607499,-0.016958017,-0.0075256466,0.016688732,0.017201334,0.0063356073,0.0010765387,-0.01883158,0.020108633,-0.010229865,0.023191577,-0.032579146,-0.014076394,0.024445137,0.018989442,0.013496212,0.036721643,-0.012759064,0.008726786,0.0004576697,0.0050350283,0.0039765323,0.004707398,0.023158262,0.01373482,-0.0065868627,-0.010776743,-0.011662206,0.005946158,0.0067274864,-0.043164298,0.039210364]},{"t":"Adult Literacy, Remedial Education, and Ged Teachers and Instructors","e":[0.011150015,-0.019558104,0.014599357,-0.02734919,0.0036134792,0.016742826,0.009685025,0.027112432,-0.0067444188,0.023478728,-0.014471815,-0.009681295,0.005682493,0.0002412612,0.10381791,0.020073589,0.0065633254,0.004423127,0.012269828,-0.0028391816,-0.031961866,0.012386871,0.015179139,0.012119163,0.008602381,-0.030580329,0.021265779,0.0051343567,0.003217896,-0.015623286,0.0020766815,0.027697949,0.0077790506,0.0033405481,0.0240087,0.0036708545,0.0004532466,-0.0056194714,-0.007933204,0.006882589,-0.002255176,0.004238407,0.018726923,0.0020728111,0.0060211425,-0.0005250454,-0.0170891,-0.0035463604,-0.03648619,0.021753836]},{"t":"Self-Enrichment Education Teachers","e":[0.0091072805,-0.0053781746,0.00359151,-0.036729246,-0.006622413,0.016623743,0.0062879114,0.013595788,-0.006685265,0.0155830495,0.0072002816,-0.0029696152,-0.020825602,0.0010299891,0.10911715,0.017411763,0.01940252,-0.012279397,0.01412016,0.018277988,-0.0036158895,0.0061340597,0.0044777095,0.0108304005,-0.0023965898,-0.02650627,0.02477035,-0.004621949,0.0067675994,-0.058503974,-0.006697581,0.025049645,0.007942215,0.00418104,0.036564063,0.018717095,0.038970646,-0.0059597776,-0.005653019,-0.0012911694,-0.01009492,0.0277292,0.0002566943,-0.013024952,0.0013352436,-0.002390693,-0.017511781,-0.0070177065,-0.031248283,0.025219552]},{"t":"Architects, Except Landscape and Naval","e":[-0.025414065,-0.0072908206,0.025327876,-0.06904643,-0.0036001303,0.016349945,0.014279418,-0.000533483,-0.013875578,0.005189561,-0.019358499,-0.010366349,-0.012078729,0.020758413,0.12060866,-0.013129239,-0.005444196,0.020713413,-0.0052767554,-0.011752859,-0.015402489,0.017243126,0.01668904,-0.0043939217,-0.0025291196,-0.0016268112,0.015553051,0.021273315,0.019383863,-0.019499976,-0.011904,6.5162e-05,-0.02373936,0.019957315,0.03189022,-0.037806552,0.008220549,-0.0020287859,0.012317448,-0.021953497,-0.0067789312,0.016127728,-0.001095029,-0.020907424,0.0013539246,0.021626282,0.008774795,0.006938981,-0.02986611,0.0044950284]}];

const BACKEND = 'https://hacklytics-careerlens.onrender.com';

// ── GEMINI DIRECT API ──────────────────────────────────────────────────────
// Paste your Gemini API key here — analysis works even when Render is asleep
const GEMINI_API_KEY = 'AIzaSyAKiGK9U1a5sSeCDrCG_FiWVpZKv2jWJno';
const GEMINI_MODEL   = 'gemini-2.0-flash-lite';

async function callGeminiDirect(prompt) {
  const url = `https://generativelanguage.googleapis.com/v1/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`;
  console.log('[CareerLens] Calling Gemini directly:', GEMINI_MODEL);
  console.log('[CareerLens] Key starts with:', GEMINI_API_KEY.slice(0,8) + '...');
  
  let res;
  try {
    res = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }],
        generationConfig: { temperature: 0.4, maxOutputTokens: 2048 }
      })
    });
  } catch(networkErr) {
    console.error('[CareerLens] Network/CORS error:', networkErr);
    throw new Error('Network error — if running locally, open via a server (not file://). Details: ' + networkErr.message);
  }
  
  if (!res.ok) {
    let errBody = {};
    try { errBody = await res.json(); } catch(e) {}
    console.error('[CareerLens] Gemini HTTP error:', res.status, errBody);
    throw new Error('Gemini API ' + res.status + ': ' + (errBody?.error?.message || res.statusText));
  }
  const data = await res.json();
  console.log('[CareerLens] Gemini response received OK');
  return data.candidates?.[0]?.content?.parts?.[0]?.text || '';
}
// ──────────────────────────────────────────────────────────────────────────

let salaryChart = null;
let currentJob = null;
let geminiDataCache = null; // stores parsed Gemini JSON for current job

// ═══════════════════════════════════════════════
// INIT — populate dropdown from JSON
// ═══════════════════════════════════════════════
window.addEventListener('load', () => {
  const sel = document.getElementById('job-select');
  JOBS.forEach((j, i) => {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = j.t;
    sel.appendChild(opt);
  });
  sel.addEventListener('change', () => {
    const btn = document.getElementById('analyze-btn');
    btn.disabled = sel.value === '';
  });
  // Hide salary chart canvas initially
  document.getElementById('salary-chart').style.display = 'none';
});

// ═══════════════════════════════════════════════
// COSINE SIMILARITY (client-side fallback)
// ═══════════════════════════════════════════════
function cosineSim(a, b) {
  let dot = 0, na = 0, nb = 0;
  for(let i = 0; i < a.length; i++) {
    dot += a[i] * b[i];
    na += a[i] * a[i];
    nb += b[i] * b[i];
  }
  return dot / (Math.sqrt(na) * Math.sqrt(nb));
}

function clientSideVectorSearch(jobIdx, topK) {
  const queryEmb = JOBS[jobIdx].e;
  return JOBS
    .map((j, i) => ({ idx: i, title: j.t, score: i === jobIdx ? -1 : cosineSim(queryEmb, j.e) }))
    .sort((a, b) => b.score - a.score)
    .slice(0, topK)
    .map((r, rank) => ({
      rank: rank + 1,
      job_title: r.title,
      similarity_pct: Math.round(Math.max(0, r.score) * 100),
      source: 'client'
    }));
}

// ═══════════════════════════════════════════════
// MAIN ANALYSIS — runs when user clicks Analyze
// ═══════════════════════════════════════════════
async function runAnalysis() {
  const sel = document.getElementById('job-select');
  const jobIdx = parseInt(sel.value);
  if(isNaN(jobIdx)) return;

  currentJob = JOBS[jobIdx].t;
  geminiDataCache = null;

  // Show UI
  document.getElementById('stats-strip').style.display = 'grid';
  document.getElementById('dashboard').style.display = 'grid';
  document.getElementById('conclusion-section').style.display = 'block';
  document.getElementById('conclusion-job-name').textContent = currentJob;

  // Set loading states
  setLoadingStats();
  setLoadingConclusion();

  // Run all three in parallel
  await Promise.all([
    runVectorSearch(jobIdx),
    runGeminiAnalysis(currentJob)
  ]);
}

function setLoadingStats() {
  ['stat-salary','stat-demand','stat-stress','stat-auto'].forEach(id => {
    const el = document.getElementById(id);
    el.innerHTML = '<span style="font-size:0.9rem;animation:pulse 1s infinite">⏳ loading…</span>';
  });
}

function setLoadingConclusion() {
  ['c-verdict','c-verdict-sub','c-state','c-state-sub','c-risk','c-risk-sub','c-today','c-future','c-advice'].forEach(id => {
    document.getElementById(id).textContent = '—';
  });
  document.getElementById('score-row').innerHTML = '';
}

// ═══════════════════════════════════════════════
// VECTOR SEARCH
// ═══════════════════════════════════════════════
async function runVectorSearch(jobIdx) {
  const container = document.getElementById('vector-results');
  container.innerHTML = '<div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div><span style="margin-left:0.5rem;font-size:0.75rem;color:var(--muted)">Querying Actian VectorAI…</span></div>';

  let results = null;
  let liveMode = false;

  try {
    const res = await fetch(BACKEND + '/vector-search', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ profession: currentJob, year: 2024, top_k: 5 })
    });
    if(!res.ok) throw new Error('status ' + res.status);
    const data = await res.json();
    results = data.results;
    liveMode = true;
  } catch(e) {
    // Fallback: real cosine similarity using embedded_jobs.json embeddings
    results = clientSideVectorSearch(jobIdx, 5);
  }

  container.innerHTML = '';
  results.forEach((r, i) => {
    setTimeout(() => {
      const card = document.createElement('div');
      card.className = 'vector-card';
      const pct = r.similarity_pct ?? Math.round((r.similarity_score || 0) * 100);
      card.innerHTML = `
        <div class="vc-rank">#${r.rank}</div>
        <div class="vc-info">
          <div class="vc-name">${r.job_title}</div>
          <div class="vc-meta">embedded_jobs.json · 3072-dim Gemini embedding</div>
          <div class="vc-bar"><div class="vc-fill" style="width:${pct}%"></div></div>
        </div>
        <div style="text-align:right">
          <div class="vc-score" style="color:var(--teal)">${pct}%</div>
          <div style="font-size:0.65rem;color:var(--muted);margin-top:0.2rem">similarity</div>
        </div>`;
      container.appendChild(card);
    }, i * 120);
  });

  setTimeout(() => {
    const insight = document.getElementById('vector-insight');
    insight.style.display = 'block';
    insight.innerHTML = liveMode
      ? `<strong style="color:var(--teal)">Actian VectorAI — live results</strong> from <code style="font-size:0.75rem">${BACKEND}/vector-search</code>`
      : `<strong style="color:var(--amber)">Client-side fallback</strong> — cosine similarity computed directly from embedded_jobs.json (50-dim slice of 3072-dim Gemini embeddings). <a href="${BACKEND}" target="_blank" style="color:var(--teal)">Check backend ↗</a>`;
  }, results.length * 120 + 300);
}

// ═══════════════════════════════════════════════
// GEMINI ANALYSIS — one call, returns structured JSON
// ═══════════════════════════════════════════════
async function runGeminiAnalysis(jobTitle) {
  const prompt = `You are a U.S. labor market analyst. Analyze the occupation: "${jobTitle}".

Return ONLY valid JSON (no markdown, no extra text) in this exact structure:
{
  "salary_2024": "$XX,XXX",
  "demand_10yr": "+X%",
  "stress_index": XX,
  "automation_risk": "XX%",
  "verdict": "one short phrase",
  "verdict_color": "green|amber|red",
  "best_state": "State Name",
  "best_state_reason": "one sentence why",
  "biggest_risk": "short risk label",
  "biggest_risk_reason": "one sentence",
  "today": "2-3 sentence honest summary of current state of this occupation — salary range, demand, workload reality",
  "future": "2-3 sentences on 2025-2030 outlook — what changes, what stays stable",
  "advice": "2-3 sentences direct advice on whether to pursue this — no fluff",
  "salary_history": [
    {"year":2005,"salary":XXXXX},{"year":2006,"salary":XXXXX},{"year":2007,"salary":XXXXX},
    {"year":2008,"salary":XXXXX},{"year":2009,"salary":XXXXX},{"year":2010,"salary":XXXXX},
    {"year":2011,"salary":XXXXX},{"year":2012,"salary":XXXXX},{"year":2013,"salary":XXXXX},
    {"year":2014,"salary":XXXXX},{"year":2015,"salary":XXXXX},{"year":2016,"salary":XXXXX},
    {"year":2017,"salary":XXXXX},{"year":2018,"salary":XXXXX},{"year":2019,"salary":XXXXX},
    {"year":2020,"salary":XXXXX},{"year":2021,"salary":XXXXX},{"year":2022,"salary":XXXXX},
    {"year":2023,"salary":XXXXX},{"year":2024,"salary":XXXXX}
  ],
  "salary_forecast": [
    {"year":2025,"salary":XXXXX},{"year":2026,"salary":XXXXX},{"year":2027,"salary":XXXXX},
    {"year":2028,"salary":XXXXX},{"year":2029,"salary":XXXXX},{"year":2030,"salary":XXXXX}
  ],
  "heatmap_values": [XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX,XXXXX],
  "scores": [
    {"label":"Job Security","value":XX},
    {"label":"Salary Potential","value":XX},
    {"label":"Work-Life Balance","value":XX},
    {"label":"Future Demand","value":XX},
    {"label":"Automation Resistance","value":XX}
  ]
}

salary_history and salary_forecast should be realistic BLS-estimated salary numbers (integers, no $).
heatmap_values should be 20 integers — median salary for each year 2005-2024.
scores values should be 0-100.
Return ONLY the JSON object.`;

  try {
    const raw = await callGeminiDirect(prompt);
    const clean = raw.replace(/```json|```/g, '').trim();
    const parsed = JSON.parse(clean);
    geminiDataCache = parsed;
    applyGeminiData(parsed, jobTitle);
  } catch(e) {
    showGeminiError(e.toString());
  }
}

function applyGeminiData(d, jobTitle) {
  // Stats
  document.getElementById('stat-salary').textContent = d.salary_2024 || '—';
  document.getElementById('stat-demand').textContent = d.demand_10yr || '—';
  const stress = d.stress_index || 0;
  document.getElementById('stat-stress').textContent = stress + '/100';
  document.getElementById('stat-stress-sub').textContent = stress > 70 ? 'High workload' : stress > 50 ? 'Moderate workload' : 'Manageable';
  document.getElementById('stat-auto').textContent = d.automation_risk || '—';
  const autoNum = parseInt((d.automation_risk||'0').replace('%',''));
  document.getElementById('stat-auto-sub').textContent = autoNum > 60 ? 'High risk' : autoNum > 35 ? 'Moderate risk' : 'Low risk';

  // Conclusion cards
  const verdictColors = { green: 'var(--teal)', amber: 'var(--amber)', red: 'var(--crimson)' };
  document.getElementById('c-verdict').textContent = d.verdict || '—';
  document.getElementById('c-verdict').style.color = verdictColors[d.verdict_color] || 'var(--text)';
  document.getElementById('c-verdict-sub').textContent = d.today ? d.today.split('.')[0] + '.' : '—';
  document.getElementById('c-state').textContent = d.best_state || '—';
  document.getElementById('c-state-sub').textContent = d.best_state_reason || '—';
  document.getElementById('c-risk').textContent = d.biggest_risk || '—';
  document.getElementById('c-risk-sub').textContent = d.biggest_risk_reason || '—';

  document.getElementById('c-today').textContent = d.today || '—';
  document.getElementById('c-future').textContent = d.future || '—';
  document.getElementById('c-advice').textContent = d.advice || '—';

  // Scores
  const scoreColors = ['var(--teal)','var(--blue)','var(--amber)','var(--violet)','var(--teal)'];
  if(d.scores && d.scores.length) {
    document.getElementById('score-row').innerHTML = d.scores.map((s, i) => `
      <div class="score-item">
        <div class="score-item-label">${s.label}</div>
        <div class="score-bar-wrap">
          <div class="score-bar-track"><div class="score-bar-fill" style="width:${s.value}%;background:${scoreColors[i%scoreColors.length]}"></div></div>
          <span class="score-num" style="color:${scoreColors[i%scoreColors.length]}">${s.value}</span>
        </div>
      </div>`).join('');
  }

  // Build salary chart
  if(d.salary_history && d.salary_forecast) {
    buildSalaryChart(d.salary_history, d.salary_forecast, jobTitle);
  }

  // Build heatmap
  if(d.heatmap_values && d.heatmap_values.length === 20) {
    buildHeatmap(d.heatmap_values, jobTitle);
  }

  // Set default question in ask box
  document.getElementById('gemini-input').placeholder = `Ask anything about ${jobTitle}...`;
  buildQuickPrompts(jobTitle);
}

function showGeminiError(err) {
  const msg = String(err);
  document.getElementById('stat-salary').textContent = 'Error';
  document.getElementById('stat-demand').textContent = '—';
  document.getElementById('stat-stress').textContent = '—';
  document.getElementById('stat-auto').textContent = '—';
  // Show the real error prominently
  const errBox = `<div style="background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.4);border-radius:8px;padding:1rem;margin:1rem 0;font-family:DM Mono,monospace;font-size:0.75rem;color:#ef4444;line-height:1.6">
    <strong>⚠ Gemini Error</strong><br>${msg}
    <br><br><span style="color:#94a3b8">Check: API key valid? Billing enabled on Google AI Studio? Open browser console (F12) for full details.</span>
  </div>`;
  document.getElementById('c-today').innerHTML = errBox;
  if(document.getElementById('gemini-response')) {
    document.getElementById('gemini-response').innerHTML = '<span style="color:var(--crimson)">' + msg + '</span>';
  }
  console.error('[CareerLens Gemini Error]', err);
}

// ═══════════════════════════════════════════════
// SALARY CHART
// ═══════════════════════════════════════════════
function buildSalaryChart(history, forecast, jobTitle) {
  const canvas = document.getElementById('salary-chart');
  canvas.style.display = 'block';
  document.getElementById('chart-placeholder').style.display = 'none';

  if(salaryChart) { salaryChart.destroy(); salaryChart = null; }

  const histYears = history.map(h => h.year);
  const histSalaries = history.map(h => h.salary);
  const forecastYears = forecast.map(f => f.year);
  const forecastSalaries = forecast.map(f => f.salary);

  // Combine for x-axis
  const allYears = [...histYears, ...forecastYears];

  // Historical dataset: values for hist years, null for forecast years
  const histData = allYears.map(y => {
    const h = history.find(h => h.year === y);
    return h ? h.salary : null;
  });

  // Forecast dataset: null for hist years, then connect from last hist point
  const lastHist = histSalaries[histSalaries.length - 1];
  const forecastData = allYears.map((y, i) => {
    if(y === histYears[histYears.length - 1]) return lastHist; // bridge
    const f = forecast.find(f => f.year === y);
    return f ? f.salary : null;
  });

  salaryChart = new Chart(canvas.getContext('2d'), {
    type: 'line',
    data: {
      labels: allYears,
      datasets: [
        {
          label: 'Historical (BLS)',
          data: histData,
          borderColor: 'rgba(59,130,246,0.9)',
          backgroundColor: 'rgba(59,130,246,0.08)',
          borderWidth: 2.5,
          pointRadius: 3,
          pointBackgroundColor: 'rgba(59,130,246,1)',
          fill: true,
          tension: 0.3,
          spanGaps: false
        },
        {
          label: 'Forecast (Gemini)',
          data: forecastData,
          borderColor: 'rgba(139,92,246,0.9)',
          backgroundColor: 'rgba(139,92,246,0.06)',
          borderWidth: 2.5,
          borderDash: [6,3],
          pointRadius: 3,
          pointBackgroundColor: 'rgba(139,92,246,1)',
          fill: true,
          tension: 0.3,
          spanGaps: false
        }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      scales: {
        x: {
          grid: {color:'rgba(255,255,255,0.04)'},
          ticks: {color:'#64748b', font:{family:'DM Mono',size:10},
            callback: (val, i) => allYears[i] % 5 === 0 ? allYears[i] : ''
          }
        },
        y: {
          grid: {color:'rgba(255,255,255,0.04)'},
          ticks: {color:'#64748b', font:{family:'DM Mono',size:10},
            callback: v => '$' + (v/1000).toFixed(0) + 'K'
          }
        }
      },
      plugins: {
        legend: { labels: {color:'#94a3b8', font:{family:'Instrument Sans',size:11}, boxWidth:12} },
        tooltip: {
          callbacks: {
            label: ctx => ctx.dataset.label + ': $' + ctx.parsed.y.toLocaleString()
          }
        },
        annotation: {
          annotations: {
            divider: {
              type: 'line', xMin: 2024.5, xMax: 2024.5,
              borderColor: 'rgba(255,255,255,0.15)', borderWidth: 1, borderDash: [4,4]
            }
          }
        }
      }
    }
  });
}

// ═══════════════════════════════════════════════
// HEATMAP — salary by year 2005-2024
// ═══════════════════════════════════════════════
const YEARS_HM = [2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024];

function buildHeatmap(values, jobTitle) {
  const container = document.getElementById('heatmap-container');
  const minV = Math.min(...values), maxV = Math.max(...values);
  const norm = v => (v - minV) / (maxV - minV + 1);

  const colorCell = n => {
    const r = Math.round(30 + n * 29);
    const g = Math.round(60 + n * 70);
    const b = Math.round(120 + n * 126);
    return `rgb(${r},${g},${b})`;
  };

  // Column headers
  let html = '<div class="hm-col-headers">';
  YEARS_HM.forEach((y, i) => {
    html += '<div class="hm-col-head" style="flex:1">' + (i % 4 === 0 ? y : '') + '</div>';
  });
  html += '</div>';

  // Single row of cells
  html += '<div class="hm-row">';
  html += `<div class="hm-row-label">SALARY</div>`;
  values.forEach((v, i) => {
    const n = norm(v);
    const bg = colorCell(n);
    html += `<div class="hm-cell" style="flex:1;background:${bg}"
      onmouseover="showHmTooltip(event,${YEARS_HM[i]},${v})"
      onmouseleave="hideHmTooltip()"></div>`;
  });
  html += '</div>';

  // Gradient scale
  html += '<div style="margin-top:12px;display:flex;align-items:center;gap:0.5rem;font-family:monospace;font-size:0.6rem;color:var(--muted)">'
        + '<span>$' + minV.toLocaleString() + '</span>'
        + '<div style="flex:1;height:6px;border-radius:3px;background:linear-gradient(90deg,rgb(30,60,120),rgb(59,130,246))"></div>'
        + '<span>$' + maxV.toLocaleString() + '</span></div>';

  html += `<div id="hm-insight-bar" style="margin-top:0.75rem;padding:0.6rem 0.9rem;background:var(--bg2);border-radius:6px;border-left:2px solid var(--blue);font-size:0.8rem;color:var(--muted);min-height:36px;line-height:1.5">Hover a cell to see the salary for that year.</div>`;

  container.innerHTML = html;
}

function showHmTooltip(e, year, salary) {
  const tt = document.getElementById('hm-tooltip');
  tt.style.display = 'block';
  tt.style.left = (e.clientX + 12) + 'px';
  tt.style.top = (e.clientY - 40) + 'px';
  const fmt = '$' + Number(salary).toLocaleString();
  tt.innerHTML = '<strong style="color:white">' + year + '</strong> &nbsp; <span style="color:var(--blue);font-family:DM Mono,monospace">' + fmt + '</span>';
  const insight = document.getElementById('hm-insight-bar');
  if(insight) insight.innerHTML = '<strong style="color:white">' + year + '</strong> &mdash; median salary: <strong style="color:var(--blue)">' + fmt + '</strong>';
}

function hideHmTooltip() {
  document.getElementById('hm-tooltip').style.display = 'none';
}

// ═══════════════════════════════════════════════
// ASK GEMINI (free-form)
// ═══════════════════════════════════════════════
async function askGemini() {
  const input = document.getElementById('gemini-input');
  const q = input.value.trim();
  if(!q || !currentJob) return;

  const responseEl = document.getElementById('gemini-response');
  responseEl.innerHTML = '<div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div><span style="margin-left:0.5rem;font-size:0.75rem;color:var(--muted)">Querying Gemini API directly…</span></div>';

  try {
    const fullPrompt = `You are a U.S. labor market expert. The user is asking about the occupation "${currentJob}". Answer concisely and honestly in 3-5 sentences.\n\nQuestion: ${q}`;
    const answer = await callGeminiDirect(fullPrompt);
    typewriterEffect(responseEl, answer);
  } catch(e) {
    typewriterEffect(responseEl, '⚠️ Gemini API error: ' + e.message + '. Check your API key in the GEMINI_API_KEY constant.');
  }
  input.value = '';
}

function buildQuickPrompts(jobTitle) {
  const prompts = [
    `What is the real salary range for ${jobTitle}?`,
    `How demanding is the day-to-day workload for ${jobTitle}?`,
    `Is demand for ${jobTitle} growing or shrinking?`,
    `Which states pay the most for ${jobTitle}?`,
    `What is the automation risk for ${jobTitle} by 2030?`
  ];
  const row = document.getElementById('quick-prompts-row');
  row.innerHTML = '';
  prompts.forEach(p => {
    const btn = document.createElement('button');
    btn.className = 'quick-btn';
    btn.textContent = p.length > 50 ? p.slice(0,47)+'…' : p;
    btn.onclick = () => { document.getElementById('gemini-input').value = p; askGemini(); };
    row.appendChild(btn);
  });
}

// ═══════════════════════════════════════════════
// TYPEWRITER
// ═══════════════════════════════════════════════
function typewriterEffect(el, text) {
  el.innerHTML = '<span class="gemini-curAPIsor"></span>';
  let i = 0;
  function typeChar() {
    if(i < text.length) {
      const char = text[i];
      const cursor = el.querySelector('.gemini-cursor');
      if(char === '\n') {
        el.insertBefore(document.createElement('br'), cursor);
        if(text[i+1] === '\n') { el.insertBefore(document.createElement('br'), cursor); i++; }
      } else {
        el.insertBefore(document.createTextNode(char), cursor);
      }
      i++;
      setTimeout(typeChar, char === '.' || char === '!' ? 50 : 16);
    } else {
      const cursor = el.querySelector('.gemini-cursor');
      if(cursor) cursor.remove();
    }
  }
  typeChar();
}
</script>
</body>
</html>
